<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>easy-jslides DEMO</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
    
    

    <slide height="200px;;">
        <img src="img/boat-sinking.jpg" alt="">
        <img src="img/kenedy.jpg" alt="">
        <img src="img/unicorn.jpg" alt="">
        <img src="img/war-ships.jpg" alt="">
    </slide>
    




    <!-- <div style="padding: 70px; display: block;"></div> -->
    


    <slide height="100%">
        <img src="img/boat-sinking.jpg" alt="">
        <img src="img/unicorn.jpg" alt="">
        <img src="img/kenedy.jpg" alt="">
    </slide>
    



    <!-- <div style="padding: 70px; display: block;"></div> -->
    


    <slide>
        <img src="img/boat-sinking.jpg" alt="">
        <img src="img/unicorn.jpg" alt="">
    </slide>

    <style>
        body{
            
        }
    </style>

    <script>

        $(document).ready(function(){

            $.fn.ejs = {
                slides: $('slide'),

                makeSlides: function () {
                    let slides = $.fn.ejs.slides
                    

                    $(slides).each( (i ,slide) =>{
                        

                        
                        let slideParent = slide.parentElement
                        let storeSlideForMove = $(slide).remove()
                        let divElement = $(`<div class="ejs-slide-container">`).appendTo(slideParent)
                        // console.log(storeSlideForMove)
                        $(storeSlideForMove).appendTo(divElement)
                        

                        
                    })

                    //loop through all sldie tags 
                    //  and loop through all img children tags 

                    $(slides).each( (i, slide) => {
                        let childListLength = slide.children.length
                        let imgID = 0
                        slide.frame = {width: 0, height: 0}
                        slide.imgList = []
                        $(slide).children().each( (_i, elm) => {
                            
                            

                            if(elm.nodeName == "IMG"){
                                //assign ID to all the images
                                elm.ID = imgID

                                //store refrence to image in the slider tag
                                slide.imgList.push(elm)
                                
                                //all the imageses gets a class for styling
                                $(elm).addClass('ejs-slides-images')
                                
                                //every image except the first one gets hiden
                                elm.ID != 0 && $(elm).hide()

                                imgID++

                                // console.log("calc hight: ", slide.frame.height)
                            }
                            

                        })
                    })
                    
                    //fixes slide atributes and styling
                    
                    $(slides).each( (i ,slide) =>{
                        let slideHeight = $(slide).attr('height')
                        
                        //if no width atribute is given set the standard 
                            //  heigt to be 100px
                        if(slideHeight == false || slideHeight == undefined){slideHeight = "100px"}
                        
                        //gets rid of ; if there is any in the value given
                        if(slideHeight.indexOf(';') != -1){
                            let result = slideHeight.split('');
                            result = result.filter(i => i != ';')
                            slideHeight = result.join('');
                        }

                        
                        //sets inline style of the slide
                        $(slide).css("height", slideHeight)
                        

                        $(slide).children().each( (i, elm) => {
                         // define the dimentions of the frame based 
                            //on the biggest elemt width and height 
                            // if(elm.naturalWidth > slide.frame.width){
                            // slide.frame.width = elm.naturalWidth
                            // }

                            // setTimeout( () => console.log(i, " : ", $(elm).height()), 100)
                            // console.log(i, " : ", elm.height )
                            // console.log("calc hight ", elm.naturalHeight)
                            // if(elm.naturalHeight > slide.frame.height){
                            //     slide.frame.height = elm.naturalHeight
                            // }
                        })

                    })

            // --------------------------
                    
                    //setup slide behavior
                    $(slides).each( (i ,slide) =>{
                        
                        slide.currentIndex = 0
                        
                        slide.interval = () => setTimeout( ()=> {
                            $(slide.children[slide.currentIndex])
                                
                                //fadeout first images and fadein the next 
                                .fadeOut(1000, () =>{
                                    
                                    slide.currentIndex++
                                    
                                    //when index increments higher then image list
                                    if(slide.currentIndex > slide.imgList.length -1){
                                        slide.currentIndex = 0
                                    }

                                    //fade in next image 
                                    $(slide.children[slide.currentIndex]).fadeIn()
                                    
                                    //start next setTimout
                                    slide.interval()
                                }
                            )
                            console.log("run")
                        }, 3000)
                        slide.interval()
                    })


                }
            } 
            
            $.fn.ejs.makeSlides()

        })

    </script>

    <style>

        .ejs-slide-container{
            background: black;
        }

        slide{
            display: grid;
            grid-template-rows: 1fr;
            grid-template-columns: 1fr;
            margin: 20px;
            overflow: hidden;
        }

        .ejs-slides-images{
            width: auto;
            height: 100%;
            max-width: 100%;
            // max-height: 100%;
            grid-row: 1/2;
            grid-column: 1/2;
        }  

    </style>
    
    
    <!-- <div class="test"></div>
    
    <style>
        .test{
            margin-top: 400px;
            width: 120px;
            height: 120px;
            background: #555;  
        }    
        
        .test:before{
            content: "test";
            display: block;
            margin: 20px;
            width: 120px;
            height: 120px;
            background: rgb(70, 35, 35);
            position: relative;
            top: 20px;
        }
    </style> -->
    
</body>
</html>