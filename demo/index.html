<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>easy-jslides DEMO</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    
</head>
<body>    



    <slide height="400px">
        <img src="img/boat-sinking.jpg" alt="">
        <img src="img/unicorn.jpg" alt="">
    </slide>
    

    
    <slide height="200px;;">
        <img src="img/boat-sinking.jpg" alt="">
        <img src="img/unicorn.jpg" alt="">
        <img src="img/kenedy.jpg" alt="">
    </slide>    


    
    <slide>
        <div class="card-container">
            <img src="img/unicorn.jpg" alt="">
            <div class="inner-content-example">
                <h2>Inner Content Example</h2>
                <button>Enter</button>
            </div>
        </div>
        <div class="card-container">
            <img src="img/boat-sinking.jpg" alt="">
            <div class="inner-content-example">
                <button>Go for it</button>
            </div>
        </div>
    </slide>
    


    <slide>
        <div class="card-container">
            <img src="img/boat-sinking.jpg" alt="">
            <div class="inner-content-example">
                <button>Go for it</button>
            </div>
        </div>
    </slide>



    <slide height="100%">
            <img src="img/boat-sinking.jpg" alt="">
            <img src="img/kenedy.jpg" alt="">
            <img src="img/unicorn.jpg" alt="">
            <img src="img/war-ships.jpg" alt="">
        </slide>
    


    <style>

        body{
            margin-bottom: 20%;
        }

        .card-container > img{
            opacity: 0.4;
            border: solid 1px white;
            height: 100%;
            -webkit-user-select: none;
            user-select: none;
        }
        .inner-content-example{
            height: 100%;
            display: grid;
            justify-content: center;
            align-content: center;
            text-align: center;
            z-index: 1;
        }
        .inner-content-example button{
            min-width: 100px;
            width: 50%;
            text-align: center;
            justify-self: center;
            padding: 10px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: 900;
            letter-spacing: 1px;
            background: #333;
            color: #ddd;
            white-space: nowrap;
        }
        .inner-content-example button:hover{
            opacity: 0.8;
        }
        .inner-content-example h2{
            color: rgb(255, 255, 255);
            font-size: 23px;
            margin-top: 20px;
            text-shadow: 2px 2px rgba(0, 0, 0, 0.39);
        }


        /* ------------------------------- */


        .ejs--slide-container{
            margin: 20px;
            display: flex;
            height: 300px;
            background: #333;
            position: relative;
        }

        slide{
            display: grid;
            grid-template-rows: 1fr;
            grid-template-columns: 1fr;
            overflow: hidden;
            width: 100%;
            display: flex;
            align-content: center;
        }

        slide img{
            object-fit: cover;
            width: 100%;
            height: auto;
        }

        .ejs--slide-card-container{
            width: 100%;
            height: auto;
            display: grid;
            grid-template-rows: 1fr;
            grid-template-columns: 1fr;
        }
        .ejs--slide-card-container > * {
            grid-row: 1/2;
            grid-column: 1/2;
        }
        
        .ejs--slide-controls{
            position: absolute;
            display: grid;
            width: 100%;
            height: 100%;
            grid-template-columns: 1fr 1fr;
            align-content: center;
            vertical-align: end;
            opacity: 0.7;
        }

        .ejs--slide-controls--arrow > a{
            width: 100%;
            height: 100%;
            align-self: center;
        }
        .ejs--slide-controls--arrow > a{
            background: rgb(255, 255, 255);
            width: 50px;
            height: 50px;
            border-radius: 50px;
            position: relative;
            display: grid;
            align-self: center;
            margin: 7px;
        }
        .ejs--slide-controls--arrow > a::before{
            content: "";
            justify-self: center;
            align-self: center;
            background: #222;
            width: 15px;
            height: 5px;
            position: relative;
            top: 8px;
            left: -2px;
            transform: rotate(-45deg);   
        }
        .ejs--slide-controls--arrow > a::after{
            content: "";
            justify-self: center;
            align-self: center;
            background: #222;
            width: 15px;
            height: 5px;
            top: -8px;
            left: -2px;
            position: relative;
            transform: rotate(45deg);   
        }

        .ejs--slide-controls--right{
            
        }
        .ejs--slide-controls--left{
            transform: rotate(180deg);
            justify-self: end;
        }
        .ejs--slide-controls--circle-container{
            position: absolute;
            bottom: 0px;
            width: 100%;
            list-style: none;
            padding: 0;
            display: flex;
            justify-content: center;
        }
        .ejs--slide-controls--circle-container > li{
            width: 15px;
            height: 15px;
            border-radius: 45px;
            border: solid 2px #fff;
            margin: 0 10px;
        }
        .ejs--slide-controls--circle-container > li > a{
            width: 100%;
            height: 100%;
            display: block;
        }

    </style>

    <script>

        $(document).ready(function(){

            $.fn.ejs = {
                slides: $('slide'),

                makeSlides: function () {
                    let slides = $.fn.ejs.slides
                    

                        //place slides inside a div container
                    $(slides).each( (i ,slide) =>{
                        
                        let slideParent = slide.parentElement
                        let storeSlideForMove = $(slide).remove()
                        let divElement = $(`<div class="ejs--slide-container">`).appendTo(slideParent)
                        $(storeSlideForMove).appendTo(divElement)
                        
                                                    // <li><a href=""></a></li>
                        $(
                            `<div id="${'ejsSlideControls' + i}" class="ejs--slide-controls" >
                            <div class="ejs--slide-controls--right ejs--slide-controls--arrow"><a href=""></a></div>
                            
                            <div class="ejs--slide-controls--left ejs--slide-controls--arrow"><a href=""></a></div>
                            
                            <ul class="ejs--slide-controls--circle-container">
                                    
                            </ul>
                            </div>`
                        ).appendTo(divElement)
                        
                        let circleContiner = $('#ejsSlideControls' + i + " .ejs--slide-controls--circle-container")
                        let childrenAmount = $(slide).children().length
                        let liElemnts = ""
                        for (let i = 0; i < childrenAmount; i++) {
                            liElemnts += '<li><a href=""></a></li>'
                        }
                        $(liElemnts).appendTo(circleContiner) 
                        if(slide.childElementCount == 1){
                            $('#ejsSlideControls' + i).hide()
                        }
                    })


                        //loop through all sldie tags 
                        //  then loop through all img children tags 
                    $(slides).each( (i, slide) => {

                            //mark all cards in slide for the cyceling later
                        let cardID = 0
                        slide.cardList = []

                        $(slide).children().each( (i, elm) => {

                                //assign ID to all the images
                            elm.ID = cardID

                                //store refrence to image in the slider tag
                            slide.cardList.push(elm)
                            
                                //all the imageses gets a class for styling
                            $(elm).addClass('ejs--slide-card-container')
                            
                                //every image except the first one gets hiden
                            elm.ID != 0 && $(elm).hide()

                            cardID++

                            

                        })
                    })
                    
                        //fixes slide atributes and styling
                    
                    $(slides).each( (i ,slide) =>{
                        let slideHeight = $(slide).attr('height')
                        
                            //if no width atribute is given set the standard 
                                //  heigt to be 100px
                        if(slideHeight == false || slideHeight == undefined){slideHeight = "200px"}
                        
                            //gets rid of ; if there is any in the value given
                        if(slideHeight.indexOf(';') != -1){
                            let result = slideHeight.split('');
                            result = result.filter(i => i != ';')
                            slideHeight = result.join('');
                        }

                        console.log(slideHeight)
                        $(slide).parent().css("height", slideHeight)
                        

                            //sets inline style of the slide container
                        // $(slide).parent().css("height", slideHeight)
                        

                        // $(slide).children().each( (i, elm) => {
                            
                        //         //  define the dimentions of the frame based 
                        //         //     on the biggest elemt width and height 
                        //     if(elm.naturalWidth > slide.frame.width){
                        //         slide.frame.width = elm.naturalWidth
                        //     }

                        //     setTimeout( () => console.log(i, " : ", $(elm).height()), 100)
                        //     console.log(i, " : ", elm.height )
                        //     console.log("calc hight ", elm.naturalHeight)
                        //     if(elm.naturalHeight > slide.frame.height){
                        //         slide.frame.height = elm.naturalHeight
                        //     }
                        // })

                    })

            // --------------------------
                    
                    //setup slide transition behavior
                    $(slides).each( (i ,slide) =>{
            
                        slide.setupInterval = (slide, fadeoutSpeed = 1000, fadeinnSpeed = 1000, indexDirection = 1, newIndex = null) => {
                        slide.interval = () => setTimeout( ()=> {
                            $(slide.children[slide.currentIndex])
                                
                                //fadeout first images and fadein the next 
                                .fadeOut(fadeoutSpeed, () =>{
                                    
                                    if(newIndex === null){
                                        slide.currentIndex += indexDirection
                                    }else{
                                        slide.currentIndex = newIndex
                                    }
                                    
                                    //when index increments higher then image list
                                    if(slide.currentIndex > slide.cardList.length -1){
                                        slide.currentIndex = 0
                                    }
                                    if(slide.currentIndex < 0){
                                        slide.currentIndex = slide.cardList.length -1
                                    }

                                    //fade in next image 
                                    $(slide.children[slide.currentIndex]).fadeIn()
                                    
                                    //start next setTimout
                                    slide.interval()
                                }
                            )
                        }, fadeinnSpeed)
                        
                        slide.interval()
                    }


                        
                        slide.currentIndex = 0
                        if(slide.cardList.length == 1){return}
                        
                        slide.setupInterval(slide)
                    })






                }
            } 
            
            $.fn.ejs.makeSlides()

        })

    </script>

    
    
    
    <!-- <div class="test"></div>
    
    <style>
        .test{
            margin-top: 400px;
            width: 120px;
            height: 120px;
            background: #555;  
        }    
        
        .test:before{
            content: "test";
            display: block;
            margin: 20px;
            width: 120px;
            height: 120px;
            background: rgb(70, 35, 35);
            position: relative;
            top: 20px;
        }
    </style> -->
    
</body>
</html>